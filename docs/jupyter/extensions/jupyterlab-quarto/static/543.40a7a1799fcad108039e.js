(self.webpackChunkjupyterlab_quarto=self.webpackChunkjupyterlab_quarto||[]).push([[543],{9543:(t,e,n)=>{"use strict";const i=n(5940),r={leftDelimiter:"{",rightDelimiter:"}",allowedAttributes:[]};function s(t,e,n){const i={match:!1,j:null},r=void 0!==n.shift?e+n.shift:n.position;if(void 0!==n.shift&&r<0)return i;const a=(h=t,(f=r)>=0?h[f]:h[h.length+f]);var h,f;if(void 0===a)return i;for(const t of Object.keys(n))if("shift"!==t&&"position"!==t){if(void 0===a[t])return i;if("children"===t&&l(n.children)){if(0===a.children.length)return i;let t;const e=n.children,r=a.children;if(e.every((t=>void 0!==t.position))){if(t=e.every((t=>s(r,t.position,t).match)),t){const t=c(e).position;i.j=t>=0?t:r.length+t}}else for(let n=0;n<r.length;n++)if(t=e.every((t=>s(r,n,t).match)),t){i.j=n;break}if(!1===t)return i}else switch(typeof n[t]){case"boolean":case"number":case"string":if(a[t]!==n[t])return i;break;case"function":if(!n[t](a[t]))return i;break;case"object":if(o(n[t])){if(!1===n[t].every((e=>e(a[t]))))return i;break}default:throw new Error(`Unknown type of pattern test (key: ${t}). Test should be of type boolean, number, string, function or array of functions.`)}}return i.match=!0,i}function l(t){return Array.isArray(t)&&t.length&&t.every((t=>"object"==typeof t))}function o(t){return Array.isArray(t)&&t.length&&t.every((t=>"function"==typeof t))}function c(t){return t.slice(-1)[0]||{}}t.exports=function(t,e){let n=Object.assign({},r);n=Object.assign(n,e);const l=i(n);t.core.ruler.before("linkify","curly_attributes",(function(t){const e=t.tokens;for(let t=0;t<e.length;t++)for(let n=0;n<l.length;n++){const i=l[n];let r=null;i.tests.every((n=>{const i=s(e,t,n);return null!==i.j&&(r=i.j),i.match}))&&(i.transform(e,t,r),"inline attributes"!==i.name&&"inline nesting 0"!==i.name||n--)}}))}},5940:(t,e,n)=>{"use strict";const i=n(1916);function r(t){return t.slice(-1)[0]}t.exports=t=>{const e=new RegExp("^ {0,3}[-*_]{3,} ?"+i.escapeRegExp(t.leftDelimiter)+"[^"+i.escapeRegExp(t.rightDelimiter)+"]");return[{name:"fenced code blocks",tests:[{shift:0,block:!0,info:i.hasDelimiters("end",t)}],transform:(e,n)=>{const r=e[n],s=r.info.lastIndexOf(t.leftDelimiter),l=i.getAttrs(r.info,s,t);i.addAttrs(l,r),r.info=i.removeDelimiter(r.info,t)}},{name:"inline nesting 0",tests:[{shift:0,type:"inline",children:[{shift:-1,type:t=>"image"===t||"code_inline"===t},{shift:0,type:"text",content:i.hasDelimiters("start",t)}]}],transform:(e,n,r)=>{const s=e[n].children[r],l=s.content.indexOf(t.rightDelimiter),o=e[n].children[r-1],c=i.getAttrs(s.content,0,t);i.addAttrs(c,o),s.content.length===l+t.rightDelimiter.length?e[n].children.splice(r,1):s.content=s.content.slice(l+t.rightDelimiter.length)}},{name:"tables",tests:[{shift:0,type:"table_close"},{shift:1,type:"paragraph_open"},{shift:2,type:"inline",content:i.hasDelimiters("only",t)}],transform:(e,n)=>{const r=e[n+2],s=i.getMatchingOpeningToken(e,n),l=i.getAttrs(r.content,0,t);i.addAttrs(l,s),e.splice(n+1,3)}},{name:"inline attributes",tests:[{shift:0,type:"inline",children:[{shift:-1,nesting:-1},{shift:0,type:"text",content:i.hasDelimiters("start",t)}]}],transform:(e,n,r)=>{const s=e[n].children[r],l=s.content,o=i.getAttrs(l,0,t),c=i.getMatchingOpeningToken(e[n].children,r-1);i.addAttrs(o,c),s.content=l.slice(l.indexOf(t.rightDelimiter)+t.rightDelimiter.length)}},{name:"list softbreak",tests:[{shift:-2,type:"list_item_open"},{shift:0,type:"inline",children:[{position:-2,type:"softbreak"},{position:-1,type:"text",content:i.hasDelimiters("only",t)}]}],transform:(e,n,r)=>{const s=e[n].children[r].content,l=i.getAttrs(s,0,t);let o=n-2;for(;e[o-1]&&"ordered_list_open"!==e[o-1].type&&"bullet_list_open"!==e[o-1].type;)o--;i.addAttrs(l,e[o-1]),e[n].children=e[n].children.slice(0,-2)}},{name:"list double softbreak",tests:[{shift:0,type:t=>"bullet_list_close"===t||"ordered_list_close"===t},{shift:1,type:"paragraph_open"},{shift:2,type:"inline",content:i.hasDelimiters("only",t),children:t=>1===t.length},{shift:3,type:"paragraph_close"}],transform:(e,n)=>{const r=e[n+2].content,s=i.getAttrs(r,0,t),l=i.getMatchingOpeningToken(e,n);i.addAttrs(s,l),e.splice(n+1,3)}},{name:"list item end",tests:[{shift:-2,type:"list_item_open"},{shift:0,type:"inline",children:[{position:-1,type:"text",content:i.hasDelimiters("end",t)}]}],transform:(e,n,s)=>{const l=e[n].children[s],o=l.content,c=i.getAttrs(o,o.lastIndexOf(t.leftDelimiter),t);i.addAttrs(c,e[n-2]);const a=o.slice(0,o.lastIndexOf(t.leftDelimiter));l.content=" "!==r(a)?a:a.slice(0,-1)}},{name:"\n{.a} softbreak then curly in start",tests:[{shift:0,type:"inline",children:[{position:-2,type:"softbreak"},{position:-1,type:"text",content:i.hasDelimiters("only",t)}]}],transform:(e,n,r)=>{const s=e[n].children[r],l=i.getAttrs(s.content,0,t);let o=n+1;for(;e[o+1]&&-1===e[o+1].nesting;)o++;const c=i.getMatchingOpeningToken(e,o);i.addAttrs(l,c),e[n].children=e[n].children.slice(0,-2)}},{name:"horizontal rule",tests:[{shift:0,type:"paragraph_open"},{shift:1,type:"inline",children:t=>1===t.length,content:t=>null!==t.match(e)},{shift:2,type:"paragraph_close"}],transform:(e,n)=>{const r=e[n];r.type="hr",r.tag="hr",r.nesting=0;const s=e[n+1].content,l=s.lastIndexOf(t.leftDelimiter),o=i.getAttrs(s,l,t);i.addAttrs(o,r),r.markup=s,e.splice(n+1,2)}},{name:"end of block",tests:[{shift:0,type:"inline",children:[{position:-1,content:i.hasDelimiters("end",t),type:t=>"code_inline"!==t&&"math_inline"!==t}]}],transform:(e,n,s)=>{const l=e[n].children[s],o=l.content,c=i.getAttrs(o,o.lastIndexOf(t.leftDelimiter),t);let a=n+1;for(;e[a+1]&&-1===e[a+1].nesting;)a++;const h=i.getMatchingOpeningToken(e,a);i.addAttrs(c,h);const f=o.slice(0,o.lastIndexOf(t.leftDelimiter));l.content=" "!==r(f)?f:f.slice(0,-1)}}]}},1916:(t,e)=>{function n(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}e.getAttrs=function(t,e,n){const i=/[^\t\n\f />"'=]/,r=[];let s="",l="",o=!0,c=!1;for(let a=e+n.leftDelimiter.length;a<t.length;a++){if(t.slice(a,a+n.rightDelimiter.length)===n.rightDelimiter){""!==s&&r.push([s,l]);break}const e=t.charAt(a);if("="===e&&o)o=!1;else if("."!==e||""!==s)if("#"!==e||""!==s)if('"'!==e||""!==l||c)if('"'===e&&c)c=!1;else if(" "!==e||c)o&&-1===e.search(i)||(o?s+=e:l+=e);else{if(""===s)continue;r.push([s,l]),s="",l="",o=!0}else c=!0;else s="id",o=!1;else"."===t.charAt(a+1)?(s="css-module",a+=1):s="class",o=!1}if(n.allowedAttributes&&n.allowedAttributes.length){const t=n.allowedAttributes;return r.filter((function(e){const n=e[0];return t.some((function(t){return n===t||t instanceof RegExp&&t.test(n)}))}))}return r},e.addAttrs=function(t,e){for(let n=0,i=t.length;n<i;++n){const i=t[n][0];"class"===i?e.attrJoin("class",t[n][1]):"css-module"===i?e.attrJoin("css-module",t[n][1]):e.attrPush(t[n])}return e},e.hasDelimiters=function(t,e){if(!t)throw new Error('Parameter `where` not passed. Should be "start", "end" or "only".');return function(n){const i=e.leftDelimiter.length+1+e.rightDelimiter.length;if(!n||"string"!=typeof n||n.length<i)return!1;let r,s,l,o;const c=i-e.rightDelimiter.length;switch(t){case"start":l=n.slice(0,e.leftDelimiter.length),r=l===e.leftDelimiter?0:-1,s=-1===r?-1:n.indexOf(e.rightDelimiter,c),o=n.charAt(s+e.rightDelimiter.length),o&&-1!==e.rightDelimiter.indexOf(o)&&(s=-1);break;case"end":r=n.lastIndexOf(e.leftDelimiter),s=-1===r?-1:n.indexOf(e.rightDelimiter,r+c),s=s===n.length-e.rightDelimiter.length?s:-1;break;case"only":l=n.slice(0,e.leftDelimiter.length),r=l===e.leftDelimiter?0:-1,l=n.slice(n.length-e.rightDelimiter.length),s=l===e.rightDelimiter?n.length-e.rightDelimiter.length:-1;break;default:throw new Error(`Unexpected case ${t}, expected 'start', 'end' or 'only'`)}return-1!==r&&-1!==s&&function(t){const n="."===t.charAt(e.leftDelimiter.length),r="#"===t.charAt(e.leftDelimiter.length);return n||r?t.length>=i+1:t.length>=i}(n.substring(r,s+e.rightDelimiter.length))}},e.removeDelimiter=function(t,e){const i=n(e.leftDelimiter),r=n(e.rightDelimiter),s=new RegExp("[ \\n]?"+i+"[^"+i+r+"]+"+r+"$"),l=t.search(s);return-1!==l?t.slice(0,l):t},e.escapeRegExp=n,e.getMatchingOpeningToken=function(t,e){if("softbreak"===t[e].type)return!1;if(0===t[e].nesting)return t[e];const n=t[e].level,i=t[e].type.replace("_close","_open");for(;e>=0;--e)if(t[e].type===i&&t[e].level===n)return t[e];return!1};const i=/[&<>"]/,r=/[&<>"]/g,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function l(t){return s[t]}e.escapeHtml=function(t){return i.test(t)?t.replace(r,l):t}}}]);